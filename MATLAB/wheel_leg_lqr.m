M = 10.113; % 车身质量kg
m = 0.3; % 轮子质量kg

I = 0.870168809; % 车身转动惯量kg*m^2
i = 0.0; % 轮子转动惯量kg*m^2

h = 0.350; % 车质心高度m
r = 0.04; % 轮子半径m

g = 9.8; % 重力加速度m/s^2

%-----------------------------------------------------------------------%

% 临时常数
Z = M + m + i / (r * r);
D = Z * (I + M * h * h) - M * M * h * h;

a = (M * g * h * Z) / D;

b = -(M * M * h * h * g) / D;

c = -(M * h) / (D * r);

d = 1 / (Z * r) - (M * M * h * h) / (D * Z * r);

%-----------------------------------------------------------------------%

A = [0, 1, 0, 0;
     a, 0, 0, 0;
     0, 0, 0, 1;
     b, 0, 0, 0];

B = [0;
     c;
     0;
     d];

Q = diag([1, 1, 1, 1]); % 创建对角矩阵

R = 5;

%----------------------------------------------------------------------%

K = lqr(A, B, Q, R);
